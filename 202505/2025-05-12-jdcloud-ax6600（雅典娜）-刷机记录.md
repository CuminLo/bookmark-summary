# JDCloud AX6600（雅典娜） 刷机记录
- URL: https://250.ac.cn/2025/01/12/JDCloud-AX6600-openwrt/
- Added At: 2025-05-12 03:17:47
- [Link To Text](2025-05-12-jdcloud-ax6600（雅典娜）-刷机记录_raw.md)

## TL;DR
作者以263元购入京东云雅典娜路由器，利用漏洞免拆机刷入OpenWrt系统，详细记录了从开启SSH到分区配置的全过程，最终成功实现高性能路由功能并扩展存储空间，整体体验良好。

## Summary
1. **设备背景**：
   - **购买动机**：因矿难导致价格下跌，作者为替换性能瓶颈的mt7621路由器，选择京东云雅典娜（AX6600）。
   - **设备参数**：
     - 到手价：263元
     - 硬件评测参考链接：[ACWIFI评测](https://www.acwifi.net/18599.html)
   - **选购理由**：
     - 外观设计优秀
     - 可显示时间
     - 支持刷OpenWrt
     - 高性能处理器，大内存和存储空间，适合运行小型服务

2. **刷机准备**：
   - **系统版本**：设备为2022年10月库存，ROM版本JDC02-1.5.50.r2204，存在漏洞可免拆机刷机。
   - **目标**：替换京东云原生系统（避免用于PCDN）。

3. **开启SSH**：
   - **漏洞原理**：通过DHCP服务的`leasetrigger`配置注入命令，启动`dropbear`服务。
   - **利用步骤**：
     1. 篡改`/etc/config/dhcp`，设置`leasetrigger`为`/usr/sbin/dropbear`。
     2. 提交配置并启用IPv6 NAT6服务触发命令执行。
   - **脚本工具**：
     - **Python版**：通过`jdcapi`接口修改配置（需从浏览器Cookie获取`sessionid`）。
     - **JS版**：简化操作，直接在浏览器控制台执行。

4. **刷入uboot**：
   - **文件**：使用专用uboot文件`uboot-JDC_AX1800_Pro-AX6600_Athena-20240510.bin`。
   - **操作命令**：
     ```bash
     dd if=uboot文件路径 of=$(blkid -t PARTLABEL=0:APPSBL -o device) conv=fsync
     ```
   - **风险提示**：需确保文件完整，否则可能导致设备变砖。

5. **刷入GPT分区表**：
   - **步骤**：
     1. 进入uboot界面（长按Reset键上电）。
     2. 通过`http://192.168.1.1/img.html`刷入分区表文件`gpt-JDC_AX6600_Athena_dual-boot_rootfs2048M_no-last-partition.bin`。
     3. 等待路由器红灯常亮后重启。

6. **刷入OpenWrt固件**：
   - **方法**：在uboot界面直接上传线刷包（需从GitHub或恩山论坛获取）。

7. **2.5G网口配置**：
   - **调整目标**：将默认分配给WAN的2.5G网口改为LAN口供NAS使用。
   - **操作**：
     - 在OpenWrt中修改LAN口物理设置，取消`eth0`，勾选`eth4`（2.5G口）。
     - 将WAN口绑定到`eth0`。

8. **分区与挂载**：
   - **分区操作**：使用`cfdisk`对未分配的存储空间新建分区（默认大小）。
   - **格式化与挂载**：
     - 选择ext4格式格式化。
     - 挂载到`/opt`（用于Docker）或`/overlay`（扩展系统空间）。

9. **使用体验**：
   - **性能评价**：1GB内存完全满足路由需求，处理器性能强劲，可兼顾轻量服务。
   - **附加功能**：时钟显示实用。

10. **参考资料**：
    - 包含多个教程链接（Smzdm、B站、个人博客等），涉及刷机步骤、分区调整等细节。
