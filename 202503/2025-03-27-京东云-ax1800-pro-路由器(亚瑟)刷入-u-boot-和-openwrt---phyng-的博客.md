# 京东云 AX1800 Pro 路由器(亚瑟)刷入 u-boot 和 OpenWrt - Phyng 的博客
- URL: https://phyng.com/2024/05/05/ax1800-openwrt.html
- Added At: 2025-03-27 03:44:51
- [Link To Text](2025-03-27-京东云-ax1800-pro-路由器(亚瑟)刷入-u-boot-和-openwrt---phyng-的博客_raw.md)

## TL;DR
本文详细介绍了京东云AX1800 Pro路由器的刷机教程，包括开启SSH、刷入u-boot、安装OpenWrt固件及扩展分区等步骤，适用于特定ROM版本，并提供了风险提示和参考资源。

## Summary
1. **设备说明**：
   - **设备信息**：京东云 AX1800 Pro 路由器（亚瑟），512M 内存/128G 存储版本，2022年3月生产。
   - **版本限制**：仅适用于 ROM 版本为 1.2.2.r2080 - 1.3.0.r2106 的路由器，其他版本需自行测试。
   - **风险提示**：刷机可能导致路由器无法启动，需自行承担风险。

2. **开启 SSH**：
   - **步骤**：
     1. 初始化路由器后关闭自动升级。
     2. 使用 Chrome 浏览器打开路由器管理后台，通过控制台输入代码调用接口开启 SSH。
     3. 通过终端连接 SSH，密码为路由器管理密码。
   - **其他版本**：2023年5月出厂的 r2242 版本需参考其他教程开启 SSH。

3. **刷入 u-boot**：
   - **准备工作**：
     - 下载 u-boot.mbn 文件（可通过 curl 或 WinSCP 上传）。
     - 确认文件大小和完整性（644624 字节）。
   - **刷入步骤**：
     - 使用 `dd` 命令将 u-boot.mbn 刷入 `/dev/mmcblk0p13` 和 `/dev/mmcblk0p14`。
   - **验证**：通过指示灯状态和 u-boot 界面确认刷入成功。

4. **进入 u-boot 界面**：
   - **步骤**：
     1. 拔掉电源和网线，按住 reset 按钮并插电，等待指示灯变蓝后松开。
     2. 连接网线，浏览器访问 192.168.1.1 进入 u-boot 界面。
   - **网络设置**：如无法访问，需手动设置电脑 IP 地址为 192.168.1.10。

5. **刷入 OpenWrt 固件**：
   - **固件选择**：
     - 推荐使用 `squashfs-factory` 格式的固件（如 iStoreOS）。
     - 刷入成功后可通过 OpenWrt 升级界面刷入 `squashfs-sysupgrade` 格式固件。
   - **已知固件**：
     - iStoreOS（内核版本 4.4）。
     - [openwrt.ai](http://openwrt.ai)（选择 JD Cloud JDC AX1800 Pro）。
     - koksaver（内核版本 6.1/6.6）。
     - 恩山论坛固件。

6. **扩展 overlay 分区**：
   - **问题**：默认 `/overlay` 分区较小。
   - **解决方案**：
     1. 格式化 `/dev/mmcblk0p27` 分区为 ext4。
     2. 复制当前 overlay 文件到新分区。
     3. 修改 `/etc/config/fstab` 挂载新分区为 `/overlay`。
     4. 重启路由器。
   - **验证**：通过软件包管理查看剩余空间是否增大。

7. **参考文档**：
   - 多个教程和论坛链接，涵盖 SSH 开启、u-boot 刷入、固件选择和分区扩展等内容。
