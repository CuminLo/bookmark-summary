# Suffering-oriented programming - thoughts from the red planet - thoughts from the red planet
- URL: http://nathanmarz.com/blog/suffering-oriented-programming.html
- Added At: 2025-04-18 07:53:44
- [Link To Text](2025-04-18-suffering-oriented-programming---thoughts-from-the-red-planet---thoughts-from-the-red-planet_raw.md)

## TL;DR
文章介绍了"痛苦导向编程"的开发理念，强调通过实际用例驱动开发，分三个阶段实现功能、优化设计和提升性能，避免过早优化和过度设计。该方法提倡在实践中积累领域知识，通过持续重构保持代码质量，最终形成简洁有效的解决方案。

## Summary
1. **痛苦导向编程概念**：
   - **定义**：一种开发风格，核心原则是"除非感受到没有某项技术的痛苦，否则不去构建它"
   - **作用**：
     - 降低大型项目风险
     - 确保始终专注于重要问题
     - 在重大投入前充分理解问题领域
   - **开发箴言**："先实现功能，再优化设计，最后提升性能"

2. **实现阶段详解**：
   - **第一阶段：实现功能**：
     - 避免过早追求"通用"解决方案
     - 直接解决问题获取领域知识
     - Storm案例：
       - 1年时间用队列和工作者构建流处理系统
       - 学习到数据处理的确认协议、扩展技术等
       - 发现原有系统在容错和抽象层级上的不足
   - **第二阶段：优化设计**：
     - 基于实际用例寻找最简单的抽象组合
     - 避免过度工程化（警惕第二系统效应）
     - Storm案例：
       - 抽象出流(streams)、喷口(spouts)、螺栓(bolts)等核心概念
       - 开发新的数据处理保证算法
       - 通过调研验证设计
   - **第三阶段：提升性能**：
     - 专注于微观优化和资源效率
     - 与设计阶段的宏观性能考量区分
     - 避免过早优化

3. **迭代过程**：
   - 持续循环三个阶段
   - 新系统能力带来新的探索空间
   - Storm的迭代案例：
     - 增加多流发射能力
     - 引入"直接流"概念
     - 开发"事务拓扑"实现精确一次语义

4. **关键实践**：
   - **用例驱动**：
     - 实际用例比理论假设更有价值
     - 通过实践积累用例知识
   - **持续重构**：
     - 防止意外复杂性破坏代码库
     - 保持对重构的高度重视
   - **避免过度抽象**：
     - 反对在没有足够理解时进行过度设计
     - 设计必须由真实用例驱动

5. **程序员成长路径**：
   - 初级阶段：功能实现优先，代码混乱
   - 中级阶段：学习结构化编程和逻辑共享
   - 高级阶段：追求通用抽象和扩展性
   - 痛苦导向编程：回归用例驱动，避免过早泛化

6. **总结**：
   - 实际用例是开发的核心资产
   - 只有通过实践才能获得有价值的用例
   - 好的设计建立在对问题领域的深刻理解上
   - 避免为假设的未来需求进行过度设计
