# 线上故障应急处理：4 年多 on call 经验总结
- URL: https://jt26wzz.com/posts/0007-online-firefighting-real-world-lessions-from-4-years-on-call/
- Added At: 2025-04-25 02:53:10
- [Link To Text](2025-04-25-线上故障应急处理：4-年多-on-call-经验总结_raw.md)

## TL;DR
文章总结了故障处理的黄金法则和应急策略，强调快速止血、谨慎执行和高效沟通。提升能力需熟悉业务、沉淀工具、复盘流程，开发要确保可灰度、监控和回滚。心态上要团队协作，复盘需精确时间线、深挖根因并制定预防措施。最后分享了个人经历和反思，包括on call创伤和写作反馈。

## Summary
1. **故障处理黄金法则**：
   - **最高优先级是故障止血**：首要任务是恢复产品功能，而非追究根因，类比医院急救先止血再诊断。
   - **最快止血手段是找到触发变量**：系统变更（如版本发布、配置改动）是常见诱因，通过变更监控中心快速定位。
     - 例外情况：
       - 长时间未发布导致的隐性故障（如资源泄漏）。
       - 客户侧变更引发的故障（需商务沟通确认）。
   - **止血方案执行需谨慎**：
     - 避免雪上加霜：方案需灰度验证，如回滚前确保新功能兼容性。
     - 复杂场景执行困难：例如全网杀死死循环进程需临时编写脚本并人工介入。
   - **高效沟通是关键**：
     - 设立“应急一号位”统筹全局，明确角色分工。
     - 研发需清晰同步排查思路，敢于下判断并提供依据。

2. **提升故障应急能力的策略**：
   - **打磨基本功**：
     - **业务熟悉度**：掌握系统流程、核心日志、监控大盘数据源，通过“白纸复盘法”强化理解。
     - **工具脚本沉淀**：文档化低频工具（如AWK模板），利用ChatGPT辅助但需二次封装业务专用工具。
     - **排查流程复盘**：个人Review排查中的卡点，持续优化薄弱环节。
   - **功能开发三要素**：
     - 强制要求“可灰度、可监控、可回滚”。
     - 应对策略：
       - 拒绝低价值随机任务。
       - 额外时间投入确保稳定性。
   - **学习优秀案例**：
     - 推荐Cloudflare透明复盘博客（如2019年7月宕机分析），借鉴其处理逻辑与预防措施。

3. **心态调整与故障复盘**：
   - **心态建设**：
     - 故障非个人考试，团队协作优先。
     - 从被动应对到主动展示能力，接受“代码和人只需一个能跑”的实用主义。
   - **复盘要点**：
     - **时间线精确到秒**：梳理报警、响应、操作有效性等节点。
     - **根因与Action制定**：
       - 多问“为什么”深挖根因。
       - Action需覆盖全局（如DNS问题全面排查）、制度化（不依赖个人），并设置临时方案防复发。
   - **故障定责**：
     - 绩效影响难免，但强调学习成长。
     - 案例：运维发错版本后淡定分析系统缺陷，展现专业心态。

4. **个人经历与反思**：
   - **on call创伤**：电话铃声PTSD，旅游/节假日突发故障的无奈（如成都旅游途中处理问题）。
   - **写作反馈**：
     - V2EX帖子引发同行共鸣，技术博客互动差异（总结类更受欢迎）。
     - 隐去敏感故障细节避免“江湖再见”尴尬。
