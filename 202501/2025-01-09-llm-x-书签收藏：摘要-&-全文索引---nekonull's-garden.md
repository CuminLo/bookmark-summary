# LLM x 书签收藏：摘要 & 全文索引 - Nekonull's Garden
- URL: https://nekonull.me/posts/llm_x_bookmark/
- Added At: 2025-01-09 08:46:00
- [Link To Text](2025-01-09-llm-x-书签收藏：摘要-&-全文索引---nekonull's-garden_raw.md)

## TL;DR
作者为了解决书签收藏后难以查找和内容遗忘的问题，开发了一个自动化系统，通过Github Actions和AI模型生成书签的全文、摘要和总结，并存储在Github中。未来计划优化摘要质量、数据结构化、代码重构和引入向量搜索等。

## Summary
1. **背景介绍**：
   - 作者在网上冲浪时经常收藏有趣的文章或网站，但收藏后很少再次使用。
   - 自2021年5月起，作者使用名为`osmos::memo`的书签插件，将收藏记录到公开的Github存储库中。
   - 插件的工作流程简单：通过Github token，每次点击收藏按钮时，临时clone存储库，追加新条目并提交。

2. **现有问题**：
   - **死链接问题**：书签指向的URL可能失效，导致无法访问。
   - **查找困难**：书签记录仅包含URL、标题和可选标签，查找时若关键词记忆不清，难以定位。
   - **内容遗忘**：书签中大部分为长文章，时间久了容易忘记内容，重新阅读耗时。

3. **解决方案**：
   - 作者建立了一个新的存储库`bookmark-summary`，作为现有书签存储库的辅助数据。
   - 存储库包含新增书签的Markdown格式全文、列表摘要和一句话总结。
   - 通过Github Actions实现自动化流程：
     - 新增书签条目后，触发`summarize`工作流。
     - 工作流执行`process_changes.py`脚本，解析书签、保存URL到Wayback Machine、获取Markdown全文、生成列表摘要和一句话总结，并更新摘要存储库。

4. **技术细节**：
   - 主要代码由Claude和GPT4o编写，人工进行小调整。
   - 使用深度求索的`deepseek-chat`模型生成摘要，成本低廉（每月约1元）。
   - 通过o1-mini修复了一些bug，提升了生产力。

5. **未来优化方向**：
   - **列表摘要质量**：优化prompt或更换模型，解决摘要中每个大点下只列两个小点的问题。
   - **数据结构化**：考虑在Markdown之外维护JSON格式的摘要，便于未来查询。
   - **代码重构**：将逻辑分散到多个文件中，改进测试和书签存储库与摘要存储库的交互方式。
   - **向量搜索**：引入embedding模型生成嵌入，存储到SQLite数据库或向量数据库中，提升搜索效率。
   - **自动生成周报**：已实现每周新增书签的自动摘要生成，并发布到Github Releases中。
   - **工具链升级**：考虑使用更现代的工具链，如`uv`，并将依赖写在Python代码头部。

6. **部署指南**：
   - 参考`osmos::memo`指引，初始化书签存储库并安装浏览器插件。
   - 新建摘要存储库，添加`process_changes.py`脚本，并修改相关配置。
   - 在书签存储库中添加`bookmark_summary.yml`工作流文件，并配置Github PAT（Personal Access Token）。
   - 添加必要的环境变量，如`PAT`、`OPENAI_API_MODEL`、`OPENAI_API_KEY`和`OPENAI_API_ENDPOINT`。
   - 完成配置后，可通过`osmos::memo`扩展添加书签，观察工作流是否正常运行。

7. **勘误**：
   - 感谢评论区用户指出“我也想要”一节中的部分步骤错误，已在文中修复。
